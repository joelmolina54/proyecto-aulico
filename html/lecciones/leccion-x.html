<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lección X - GRAFI</title>
  <link rel="shortcut icon" href="../../assets/images/savila.png" type="image/x-icon">
  <!-- CDNs -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="shortcut icon" href="../../assets/images/savila.png" type="image/x-icon">
  <link rel="stylesheet" href="../../assets/css/temaleccion.css">
  <link rel="stylesheet" href="../../assets/css/selecciones.css">
    <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            dark: {
              800: '#1e293b',
              900: '#0f172a',
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50 dark:bg-dark-900 text-gray-800 dark:text-gray-100 transition-colors duration-300 min-h-screen flex flex-col">
<nav class="gradient-bg dark:bg-gradient-to-r dark:from-purple-900 dark:to-purple-800 text-white shadow-lg dark:shadow-purple-900/50 sticky top-0 z-50 transition-colors duration-300">
  <div class="container mx-auto px-4 py-3 flex justify-between items-center">
    
    <!-- Logo -->
    <a href="../../index.html" class="flex items-center text-xl font-bold text-white hover:text-purple-200 dark:text-purple-100 dark:hover:text-purple-300 transition">
      <img src="../../assets/images/savila.png" alt="Logo GRAFI" class="w-8 h-8 mr-2">
      <span>Grafema</span>
    </a>
    
    <!-- Botón mobile menu -->
    <button id="mobile-menu-button" class="md:hidden p-2 rounded-full focus:outline-none bg-white bg-opacity-20 dark:bg-purple-800/30 hover:bg-white hover:bg-opacity-30 dark:hover:bg-purple-700/50 transition">
      <i class="fas fa-bars text-white dark:text-yellow-300"></i>
    </button>

    <!-- Contenido del nav (desktop) -->
    <div class="hidden md:flex items-center space-x-4">
      <a href="../lecciones.html" class="text-white hover:text-purple-200 dark:text-purple-100 dark:hover:text-purple-300 font-medium transition flex items-center">
        <i class="fas fa-arrow-left mr-2"></i> Volver
      </a>
      
      <div class="flex items-center">
        <span class="mr-2 text-sm text-white dark:text-purple-200">Progreso</span>
        <div class="w-24 bg-white bg-opacity-20 dark:bg-purple-700/30 rounded-full h-2 overflow-hidden">
          <div id="progress-bar" class="bg-yellow-300 dark:bg-amber-400 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>
        <button id="dark-mode-toggle" class="ml-4 p-2 rounded-full focus:outline-none bg-white bg-opacity-20 dark:bg-purple-800/30 hover:bg-white hover:bg-opacity-30 dark:hover:bg-purple-700/50 transition">
          <i class="fas fa-moon text-white dark:text-yellow-300"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Menú móvil -->
  <div id="mobile-menu" class="md:hidden hidden px-4 pb-4">
    <a href="../lecciones.html" class="block text-white dark:text-purple-100 hover:text-purple-200 dark:hover:text-purple-300 py-2 border-b border-white border-opacity-10">Volver</a>
    <div class="mt-2 flex items-center">
      <span class="mr-2 text-sm text-white dark:text-purple-200">Progreso</span>
      <div class="w-24 bg-white bg-opacity-20 dark:bg-purple-700/30 rounded-full h-2 overflow-hidden">
        <div id="progress-bar-mobile" class="bg-yellow-300 dark:bg-amber-400 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
      </div>
      <button id="dark-mode-toggle-mobile" class="ml-4 p-2 rounded-full focus:outline-none bg-white bg-opacity-20 dark:bg-purple-800/30 hover:bg-white hover:bg-opacity-30 dark:hover:bg-purple-700/50 transition">
        <i class="fas fa-moon text-white dark:text-yellow-300"></i>
      </button>
    </div>
  </div>
</nav>

  <main class="bg-white dark:bg-dark-800 dark:bg-opacity-90 flex-grow container mx-auto px-4 py-8 shadow-sm dark:shadow-none">
    <!-- Encabezado con animación -->
    <header class="text-center mb-12 fade-in">
      <div class="relative w-32 h-32 mx-auto mb-6">
        <svg class="w-full h-full" viewBox="0 0 100 100">
          <circle class="text-gray-200 dark:text-purple-900/40" stroke-width="8" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50" />
          <circle id="progress-ring" class="text-purple-600 dark:text-amber-400 progress-ring__circle" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50" stroke-dasharray="251.2" stroke-dashoffset="251.2" />
        </svg>
        <div class="absolute inset-0 flex items-center justify-center text-5xl font-bold text-purple-700 dark:text-amber-400 animate-bounce-slow">
          X
        </div>
      </div>
      <h1 class="text-4xl font-bold text-gray-800 dark:text-white mb-2">
        Letra 
        <span class="bg-gradient-to-r from-purple-600 to-blue-500 dark:from-amber-400 dark:to-yellow-300 bg-clip-text text-transparent">
          X
        </span>
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
        Aprende el sonido de la letra S en español y su uso correcto.
      </p>
    </header>
    </header>

    <!-- Sección de aprendizaje -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
      <!-- Video explicativo -->
        <section class="lg:col-span-2 bg-white dark:bg-dark-700 rounded-xl shadow-lg dark:shadow-purple-900/20 overflow-hidden card-hover transition-all duration-300">
        <div class="p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center">
              <i class="fab fa-youtube text-red-600 mr-3 text-2xl"></i> Video explicativo
            </h2>
          </div>
          
          <div class="aspect-w-16 aspect-h-9 mb-4">
            <iframe class="w-full h-64 md:h-96 rounded-lg shadow" src="https://www.youtube.com/embed/WhjIkXYtnto?si=aWNv0GBnvjf0EGNV" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
          </div>
          
          <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-100 dark:border-purple-800">
            <h3 class="font-medium text-purple-800 dark:text-purple-200 mb-2">Resumen del video</h3>
            <p class="text-gray-700 dark:text-gray-300 text-sm">La letra X en español puede pronunciarse /ks/ o /s/ según la palabra y el contexto.</p>
            <div class="mt-3 flex items-center text-sm text-purple-600 dark:text-purple-300">
              <i class="fas fa-clock mr-2"></i>
              <span>Duración: 7 min</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Teoría resumida -->
      <section class="bg-white dark:bg-dark-700 rounded-xl shadow-lg dark:shadow-purple-900/20 overflow-hidden card-hover transition-all duration-300">
        <div class="gradient-bg dark:bg-gradient-to-r dark:from-purple-900 dark:to-purple-800 px-6 py-4">
          <h2 class="text-xl font-bold text-white flex items-center">
            <i class="fas fa-lightbulb mr-3"></i> Conceptos clave
          </h2>
        </div>
        <div class="p-6">
          <div class="mb-6">
            <div class="flex items-start mb-4">
              <div class="bg-blue-100 dark:bg-blue-900/30 p-2 rounded-full mr-3">
                <i class="fas fa-graduation-cap text-blue-600"></i>
              </div>
              <div>
                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-1">pronunciacion de la letra S /ks/ o /s/</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">La letra X puede sonar como /ks/ en palabras como "taxi" o "examen" y como /s/ en palabras como "xilófono".</p>
                <div class="mt-2 flex flex-wrap gap-2">
                  <span class="bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm">taxi</span>
                  <span class="bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm">examen</span>
                  <span class="bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm">xilófono</span>
                </div>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="bg-purple-100 dark:bg-purple-900/30 p-2 rounded-full mr-3">
                <i class="fas fa-graduation-cap text-blue-600"></i>
              </div>
              <div>
                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-1">Uso de la X</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Se usa principalmente en medio o final de palabra y en algunas abreviaturas:</p>
                <div class="mt-2 flex flex-wrap gap-2">
                  <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-3 py-1 rounded-full text-sm">inicio: examen</span>
                  <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-3 py-1 rounded-full text-sm">medio: taxi</span>
                  <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-3 py-1 rounded-full text-sm">final: tórax</span>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-yellow-50 dark:bg-amber-900/30 border-l-4 border-yellow-400 dark:border-amber-500 p-4 rounded-r-lg transition-colors duration-300">
            <div class="flex">
              <div class="flex-shrink-0">
                <i class="fas fa-info-circle text-yellow-500 dark:text-amber-400"></i>
              </div>
              <div class="ml-3">
                <p class="text-sm text-yellow-700 dark:text-amber-100">
                  Algunas palabras extranjeras con X se adaptan manteniendo el sonido /ks/, como "xenón" o "xilófono".
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

    </div>

<!-- Sección de práctica -->
<section class="mb-12">
  <div class="flex items-center mb-6">
    <h2 class="text-3xl font-bold text-gray-800 dark:text-white">
      <i class="fas fa-dumbbell text-purple-600 mr-3"></i> Practica lo aprendido
    </h2>
    <div class="ml-auto flex items-center">
      <span class="text-sm text-gray-500 dark:text-gray-400 mr-2">Nivel de dificultad:</span>
      <select class="border rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-dark-700 dark:border-gray-600">
        <option>Principiante</option>
        <option>Intermedio</option>
        <option>Avanzado</option>
      </select>
    </div>
  </div>
  
  <!-- Pestañas de ejercicios -->
  <div class="bg-white rounded-xl shadow-lg overflow-hidden">
    <div class="border-b border-gray-200">
      <nav class="flex -mb-px">
        <button id="tab-ejercicio1" class="tab-button active py-4 px-6 text-center border-b-2 font-medium text-sm border-purple-500 text-purple-600">
          Ejercicio 1
        </button>
        <button id="tab-ejercicio2" class="tab-button py-4 px-6 text-center border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
          Ejercicio 2
        </button>
        <button id="tab-ejercicio3" class="tab-button py-4 px-6 text-center border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
          Ejercicio 3
        </button>
      </nav>
    </div>
    
    <!-- Contenido de las pestañas -->
    <div class="p-6">
      <!-- Ejercicio 1 - Selección múltiple -->
      <div id="content-ejercicio1" class="tab-content active">
        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Completa las palabras con X</h3>
        <p class="text-gray-600 dark:text-gray-300 mb-6">Selecciona la letra correcta para completar cada palabra según su sonido.</p>
        
        <div class="space-y-4">
          <div class="flex flex-col md:flex-row md:items-center p-4 rounded-lg border border-gray-200 dark:border-gray-600 ejercicio-container" data-respuesta="x">
            <div class="md:w-1/3 mb-2 md:mb-0">
              <span class="text-gray-700 dark:text-gray-300">___ilófono</span>
            </div>
            <div class="md:w-1/3">
              <select class="w-full border rounded-lg px-3 py-2 ejercicio-select focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-dark-700 dark:border-gray-600">
                <option value="">Selecciona una opción</option>
                <option value="x">X</option>
                <option value="s">S</option>
              </select>
            </div>
            <div class="md:w-1/3 mt-2 md:mt-0 md:pl-4 ejercicio-feedback hidden">
              <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-2 hidden correct-icon"></i>
                <i class="fas fa-times-circle text-red-500 mr-2 hidden incorrect-icon"></i>
                <span class="text-sm feedback-text"></span>
              </div>
            </div>
          </div>
          
          <div class="flex flex-col md:flex-row md:items-center p-4 rounded-lg border border-gray-200 dark:border-gray-600 ejercicio-container" data-respuesta="x">
            <div class="md:w-1/3 mb-2 md:mb-0">
              <span class="text-gray-700 dark:text-gray-300">ta___i</span>
            </div>
            <div class="md:w-1/3">
              <select class="w-full border rounded-lg px-3 py-2 ejercicio-select focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-dark-700 dark:border-gray-600">
                <option value="">Selecciona una opción</option>
                <option value="x">X</option>
                <option value="s">S</option>
              </select>
            </div>
            <div class="md:w-1/3 mt-2 md:mt-0 md:pl-4 ejercicio-feedback hidden">
              <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-2 hidden correct-icon"></i>
                <i class="fas fa-times-circle text-red-500 mr-2 hidden incorrect-icon"></i>
                <span class="text-sm feedback-text"></span>
              </div>
            </div>
          </div>
          
          <div class="flex flex-col md:flex-row md:items-center p-4 rounded-lg border border-gray-200 dark:border-gray-600 ejercicio-container" data-respuesta="x">
            <div class="md:w-1/3 mb-2 md:mb-0">
              <span class="text-gray-700 dark:text-gray-300">e___amen</span>
            </div>
            <div class="md:w-1/3">
              <select class="w-full border rounded-lg px-3 py-2 ejercicio-select focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-dark-700 dark:border-gray-600">
                <option value="">Selecciona una opción</option>
                <option value="x">X</option>
                <option value="s">S</option>
              </select>
            </div>
            <div class="md:w-1/3 mt-2 md:mt-0 md:pl-4 ejercicio-feedback hidden">
              <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-2 hidden correct-icon"></i>
                <i class="fas fa-times-circle text-red-500 mr-2 hidden incorrect-icon"></i>
                <span class="text-sm feedback-text"></span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-6 flex justify-end">
          <button id="check-ejercicio1" class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
            <i class="fas fa-check-circle mr-2"></i> Comprobar respuestas
          </button>
        </div>
      </div>
      
      
      <!-- Ejercicio 2 - Clasificación -->
      <div id="content-ejercicio2" class="tab-content hidden">
        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Clasifica las palabras según la posición de la X</h3>
        <p class="text-gray-600 dark:text-gray-300 mb-6">Arrastra cada palabra al área correspondiente según la posición de la letra X en la palabra.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
          <div id="target-inicial" class="bg-blue-50 dark:bg-blue-900/20 border-2 border-dashed border-blue-300 dark:border-blue-700 rounded-xl p-4 min-h-32 flex flex-col">
            <div class="text-center text-blue-700 dark:text-blue-300 font-medium mb-2">
              X inicial
            </div>
            <div class="flex-grow flex flex-wrap gap-2 content-start" id="words-inicial"></div>
          </div>
          
          <div id="target-media" class="bg-purple-50 dark:bg-purple-900/20 border-2 border-dashed border-purple-300 dark:border-purple-700 rounded-xl p-4 min-h-32 flex flex-col">
            <div class="text-center text-purple-700 dark:text-purple-300 font-medium mb-2">
              X media
            </div>
            <div class="flex-grow flex flex-wrap gap-2 content-start" id="words-media"></div>
          </div>
          
          <div id="target-final" class="bg-green-50 dark:bg-green-900/20 border-2 border-dashed border-green-300 dark:border-green-700 rounded-xl p-4 min-h-32 flex flex-col">
            <div class="text-center text-green-700 dark:text-green-300 font-medium mb-2">
              X final
            </div>
            <div class="flex-grow flex flex-wrap gap-2 content-start" id="words-final"></div>
          </div>
        </div>
        
        <div id="palabras-arrastrar" class="flex flex-wrap gap-3 p-4 bg-gray-50 dark:bg-gray-800">
          <div class="bg-white dark:bg-dark-600 shadow-sm rounded-lg px-4 py-2 cursor-move draggable-word" draggable="true" data-posicion="inicial">
            <span class="text-gray-800 dark:text-gray-200">xilófono</span>
          </div>
          <div class="bg-white dark:bg-dark-600 shadow-sm rounded-lg px-4 py-2 cursor-move draggable-word" draggable="true" data-posicion="media">
            <span class="text-gray-800 dark:text-gray-200">examen</span>
          </div>
          <div class="bg-white dark:bg-dark-600 shadow-sm rounded-lg px-4 py-2 cursor-move draggable-word" draggable="true" data-posicion="final">
            <span class="text-gray-800 dark:text-gray-200">taxi</span>
          </div>
          <div class="bg-white dark:bg-dark-600 shadow-sm rounded-lg px-4 py-2 cursor-move draggable-word" draggable="true" data-posicion="inicial">
            <span class="text-gray-800 dark:text-gray-200">xenón</span>
          </div>
          <div class="bg-white dark:bg-dark-600 shadow-sm rounded-lg px-4 py-2 cursor-move draggable-word" draggable="true" data-posicion="media">
            <span class="text-gray-800 dark:text-gray-200">máximo</span>
          </div>
          <div class="bg-white dark:bg-dark-600 shadow-sm rounded-lg px-4 py-2 cursor-move draggable-word" draggable="true" data-posicion="final">
            <span class="text-gray-800 dark:text-gray-200">anexo</span>
          </div>
        </div>
        
       <div id="feedback-arrastrar" class="hidden mt-6">
          <div class="p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 feedback-content">
            <div class="flex items-center">
              <i class="fas fa-check-circle text-green-500 dark:text-green-400 text-xl mr-3"></i>
              <div>
                <h4 class="font-bold text-green-800 dark:text-green-200">¡Bien hecho!</h4>
                <p class="text-green-700 dark:text-green-300 text-sm">Has clasificado correctamente todas las palabras según la posición de la X.</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-6 flex justify-between">
          <button id="reset-ejercicio2" class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-2 rounded-lg font-medium">
            <i class="fas fa-redo mr-2"></i> Reiniciar
          </button>
          <button id="check-ejercicio2" class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
            <i class="fas fa-check-circle mr-2"></i> Comprobar
          </button>
        </div>
      </div>
      
      <!-- Ejercicio 3 - Dictado -->
      <div id="content-ejercicio3" class="tab-content hidden">
        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Dictado con palabras que contienen X</h3>
        <p class="text-gray-600 dark:text-gray-300 mb-6">Escucha atentamente y escribe las palabras que contengan la letra X.</p>
        
        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 mb-6">
          <div id="dictation-audio" class="hidden">
            <audio controls class="w-full">
              <source src="../../assets/audio/pronunciation_de_taxi.mp3" type="audio/mpeg">
              Tu navegador no soporta el elemento de audio.
            </audio>
          </div>
          
          <button id="start-dictation" class="btn-secondary text-white px-6 py-3 rounded-lg font-medium w-full">
            <i class="fas fa-microphone mr-2"></i> Iniciar dictado
          </button>
        </div>
        
        <div class="mb-6">
          <label for="dictation-text" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Escribe las palabras que escuches:</label>
          <textarea id="dictation-text" rows="4" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-dark-700 dark:border-gray-600"></textarea>
        </div>
        
        <div id="dictation-feedback" class="hidden p-4 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 mb-6">
          <div class="flex items-center">
            <i class="fas fa-info-circle text-purple-600 dark:text-purple-400 text-xl mr-3"></i>
            <div>
              <h4 class="font-bold text-purple-800 dark:text-purple-200">Retroalimentación</h4>
              <p class="text-purple-700 dark:text-purple-300 text-sm">Las palabras que contenían X eran: <span id="dictation-words" class="font-bold">xilófono, examen, taxi, xenón, máximo, anexo</span></p>
            </div>
          </div>
        </div>
        
        <div class="flex justify-end">
          <button id="check-dictation" class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
            <i class="fas fa-check-circle mr-2"></i> Comprobar dictado
          </button>
        </div>
      </div>
    </div>
  </div>
</section>


    <!-- Sección de finalización -->
<section class="mb-12">
  <div class="bg-gradient-to-r from-purple-600 to-blue-500 rounded-xl shadow-lg overflow-hidden p-8 text-center">
    <div class="max-w-2xl mx-auto">
      <h2 class="text-2xl font-bold text-white mb-4">¿Listo para completar la lección?</h2>
      <p class="text-purple-100 mb-6">Has progresado mucho. Completa todos los ejercicios para finalizar esta lección.</p>
      
      <div class="flex flex-col sm:flex-row justify-center gap-4">
        <button id="btn-completar" class="bg-white text-purple-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-medium shadow-md transition">
          <i class="fas fa-flag-checkered mr-2"></i> Terminar lección
        </button>
        
        <button id="btn-reiniciar-todo" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-6 py-3 rounded-lg font-medium shadow-md transition">
          <i class="fas fa-redo mr-2"></i> Reiniciar todo
        </button>
      </div>
    </div>
  </div>
</section>

</main>

<!-- Footer -->
<footer class="bg-gray-800 text-gray-300 py-8">
  <div class="container mx-auto px-4">
    <div class="flex flex-col md:flex-row justify-between items-center">
      <div class="mb-4 md:mb-0">
        <a href="../../index.html" class="flex items-center text-xl font-bold text-white">
          <img src="../../assets/images/savila.png" alt="Logo GRAFI" class="w-8 h-8 mr-2">
          <span>Grafema</span>
        </a>
        <p class="mt-2 text-sm">Aprendizaje interactivo de grafemas y fonemas.</p>
      </div>
      
      <div class="flex space-x-4">
        <a href="https://www.facebook.com/profile.php?id=100009295328147&locale=es_LA" class="text-gray-400 hover:text-white transition">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://www.instagram.com/joelmolina54/" class="text-gray-400 hover:text-white transition">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://github.com/joelmolina54" class="text-gray-400 hover:text-white transition">
          <i class="fab fa-github"></i>
        </a>
      </div>
    </div>
    
    <div class="border-t border-gray-700 mt-6 pt-6 text-center text-sm">
      <p>&copy; 2025 GRAFI. Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<!-- Modal universal -->
<div id="universal-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-xl shadow-2xl overflow-hidden w-full max-w-md transform transition-all">
    <div id="modal-header" class="gradient-bg p-6 text-center text-white">
      <i id="modal-icon" class="fas fa-check-circle text-4xl mb-4"></i>
      <h3 id="modal-title" class="text-2xl font-bold">Título del modal</h3>
    </div>
    
    <div class="p-6 text-center">
      <p id="modal-message" class="text-gray-600 mb-6">Mensaje del modal aquí.</p>
      
      <div class="flex flex-col space-y-3">
        <button id="modal-primary-btn" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
          <i class="fas fa-check mr-2"></i> Aceptar
        </button>
        <button id="modal-secondary-btn" class="border border-gray-300 text-gray-700 hover:bg-gray-50 px-6 py-3 rounded-lg font-medium hidden">
          <i class="fas fa-times mr-2"></i> Cancelar
        </button>
      </div>
    </div>
  </div>
</div>


  <!-- Scripts -->
  <script src="/assets/js/achievements.js"></script>
  <script src="../../assets/js/temaleccionesclases.js"></script>
  <script src="../../assets/js/menu-movil.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Cargar progreso
  const progreso = parseInt(localStorage.getItem('progreso-x')) || 0;
  updateProgress(progreso);

  // Configurar pestañas
  setupTabs();

  // Configurar drag and drop
  setupDragDrop();

  // Configurar botones
  setupButtons();

  // Configurar dictado
  setupDictation();

  // Si ya completó
  const btnCompletar = document.getElementById('btn-completar');
  if(progreso >= 100 && btnCompletar) {
    btnCompletar.innerHTML = '<i class="fas fa-check-circle mr-2"></i> Lección completada';
    btnCompletar.classList.add('bg-green-100', 'text-green-800', 'hover:bg-green-100');
    btnCompletar.disabled = true;
  }
});

// Actualizar barra y círculo
function updateProgress(percent) {
  const bar = document.getElementById('progress-bar');
  if(bar) bar.style.width = `${percent}%`;

  const circle = document.getElementById('progress-ring');
  if(circle) {
    const radius = circle.r.baseVal.value;
    const circumference = 2 * Math.PI * radius;
    const offset = circumference - (percent / 100) * circumference;
    circle.style.strokeDashoffset = offset;
  }
}

// Pestañas
function setupTabs() {
  const tabs = document.querySelectorAll('.tab-button');
  const contents = document.querySelectorAll('.tab-content');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => {
        t.classList.remove('active', 'border-purple-500', 'text-purple-600');
        t.classList.add('border-transparent', 'text-gray-500');
      });
      contents.forEach(c => {
        c.classList.remove('active');
        c.classList.add('hidden');
      });
      tab.classList.add('active', 'border-purple-500', 'text-purple-600');
      tab.classList.remove('border-transparent', 'text-gray-500');
      const content = document.getElementById(tab.id.replace('tab-', 'content-'));
      if(content) { content.classList.add('active'); content.classList.remove('hidden'); }
    });
  });
}

// Drag & Drop
function setupDragDrop() {
  const draggables = document.querySelectorAll('.draggable-word');
  const targets = document.querySelectorAll('[id^="target-"]');

  draggables.forEach(d => {
    d.addEventListener('dragstart', () => {
      d.classList.add('opacity-50', 'border-yellow-500');
      d.setAttribute('dragging', 'true');
    });
    
    d.addEventListener('dragend', () => {
      d.classList.remove('opacity-50', 'border-yellow-500');
      d.removeAttribute('dragging');
    });
  });

  targets.forEach(target => {
    target.addEventListener('dragover', e => {
      e.preventDefault();
      const draggable = document.querySelector('.draggable-word[dragging="true"]');
      if(draggable) {
        target.appendChild(draggable);
      }
    });
  });
}

// Configuración del dictado
function setupDictation() {
  const startBtn = document.getElementById('start-dictation');
  const audioElement = document.getElementById('dictation-audio');
  
  if(startBtn && audioElement) {
    startBtn.addEventListener('click', function() {
      audioElement.classList.remove('hidden');
      startBtn.classList.add('hidden');
      const audioPlayer = audioElement.querySelector('audio');
      if(audioPlayer) audioPlayer.play();
    });
  }
}

// Botones
function setupButtons() {
  // Ejercicio 1
  const check1 = document.getElementById('check-ejercicio1');
  if(check1) check1.addEventListener('click', checkEjercicio1);

  // Ejercicio 2
  const check2 = document.getElementById('check-ejercicio2');
  if(check2) check2.addEventListener('click', checkEjercicio2);
  
  const reset2 = document.getElementById('reset-ejercicio2');
  if(reset2) reset2.addEventListener('click', resetEjercicio2);

  // Ejercicio 3
  const check3 = document.getElementById('check-dictation');
  if(check3) check3.addEventListener('click', checkEjercicio3);

  // Botón terminar lección
  const btnCompletar = document.getElementById('btn-completar');
  if(btnCompletar) {
    btnCompletar.addEventListener('click', () => {
      const progresoActual = parseInt(document.getElementById('progress-bar').style.width) || 0;
      if(progresoActual >= 100) {
        localStorage.setItem('progreso-x', 100);
        showModal({
          title: '¡Lección completada!',
          message: 'Has terminado con éxito esta lección sobre la letra X.',
          icon: 'fas fa-check-circle text-green-500',
          primaryText: 'Volver a lecciones',
          onPrimary: () => window.location.href = '../lecciones.html'
        });
      } else {
        showModal({
          title: 'Lección incompleta',
          message: `¡Aún no has completado todos los ejercicios! Tu progreso actual es del ${progresoActual}%.`,
          icon: 'fas fa-exclamation-triangle text-yellow-500',
          primaryText: 'Continuar practicando'
        });
      }
    });
  }

  // Botón reiniciar todo
  const btnReiniciar = document.getElementById('btn-reiniciar-todo');
  if(btnReiniciar) {
    btnReiniciar.addEventListener('click', () => {
      showModal({
        title: 'Reiniciar lección',
        message: '¿Seguro que quieres reiniciar todo el progreso de esta lección?',
        icon: 'fas fa-exclamation-triangle text-yellow-500',
        primaryText: 'Sí, reiniciar',
        secondaryText: 'Cancelar',
        onPrimary: () => { 
          localStorage.removeItem('progreso-x'); 
          location.reload(); 
        }
      });
    });
  }
}

// Reiniciar ejercicio 2
function resetEjercicio2() {
  const palabrasArrastrar = document.getElementById('palabras-arrastrar');
  const targets = ['inicial', 'media', 'final'];
  
  targets.forEach(pos => {
    const target = document.getElementById(`target-${pos}`);
    const words = target.querySelectorAll('.draggable-word');
    words.forEach(word => {
      palabrasArrastrar.appendChild(word);
    });
  });
  
  const feedback = document.getElementById('feedback-arrastrar');
  if(feedback) feedback.classList.add('hidden');
}

// Verificación Ejercicio 1
function checkEjercicio1() {
  let allCorrect = true;
  document.querySelectorAll('.ejercicio-container').forEach(c => {
    const select = c.querySelector('.ejercicio-select');
    const feedback = c.querySelector('.ejercicio-feedback');
    const correctIcon = c.querySelector('.correct-icon');
    const incorrectIcon = c.querySelector('.incorrect-icon');
    const feedbackText = c.querySelector('.feedback-text');
    const answer = c.getAttribute('data-respuesta');

    if(feedback) feedback.classList.remove('hidden');

    if(select.value === answer) {
      if(correctIcon) correctIcon.classList.remove('hidden');
      if(incorrectIcon) incorrectIcon.classList.add('hidden');
      c.classList.add('border-green-200','bg-green-50');
      c.classList.remove('border-red-200','bg-red-50','shake');
      if(feedbackText) { 
        feedbackText.textContent = '¡Correcto!'; 
        feedbackText.className = 'text-sm text-green-600 feedback-text'; 
      }
    } else {
      if(correctIcon) correctIcon.classList.add('hidden');
      if(incorrectIcon) incorrectIcon.classList.remove('hidden');
      c.classList.add('border-red-200','bg-red-50','shake');
      c.classList.remove('border-green-200','bg-green-50');
      allCorrect = false;
      if(feedbackText) { 
        feedbackText.textContent = `Incorrecto. La respuesta correcta es "${answer.toUpperCase()}".`; 
        feedbackText.className = 'text-sm text-red-600 feedback-text'; 
      }
    }
  });

  if(allCorrect) {
    const currentProgress = parseInt(document.getElementById('progress-bar').style.width) || 0;
    const newProgress = Math.max(currentProgress, 33);
    updateProgress(newProgress);
    localStorage.setItem('progreso-x', newProgress);
    
    showModal({ 
      title: '¡Ejercicio 1 completado!',
      message: 'Has respondido correctamente.',
      icon: 'fas fa-check-circle text-green-500',
      primaryText: 'Continuar'
    });
  }
}

// Verificación Ejercicio 2
function checkEjercicio2() {
  const targets = { inicial: 'target-inicial', media: 'target-media', final: 'target-final' };
  let allCorrect = true;
  
  Object.keys(targets).forEach(pos => {
    const target = document.getElementById(targets[pos]);
    const words = target.querySelectorAll('.draggable-word');
    
    words.forEach(w => {
      if(w.getAttribute('data-posicion') !== pos) {
        allCorrect = false;
        w.classList.add('border-red-500', 'shake');
      } else {
        w.classList.remove('border-red-500', 'shake');
        w.classList.add('border-green-500');
      }
    });
  });

  const feedback = document.getElementById('feedback-arrastrar');
  
  if(allCorrect) {
    const currentProgress = parseInt(document.getElementById('progress-bar').style.width) || 0;
    const newProgress = Math.max(currentProgress, 66);
    updateProgress(newProgress);
    localStorage.setItem('progreso-x', newProgress);
    
    if(feedback) {
      feedback.classList.remove('hidden');
      feedback.querySelector('.feedback-content').classList.remove('bg-red-50', 'border-red-200');
      feedback.querySelector('.feedback-content').classList.add('bg-green-50', 'border-green-200');
      feedback.querySelector('h4').textContent = '¡Bien hecho!';
      feedback.querySelector('p').textContent = 'Has clasificado correctamente todas las palabras según la posición de la X.';
      feedback.querySelector('i').className = 'fas fa-check-circle text-green-500 text-xl mr-3';
    }
    
    showModal({ 
      title: '¡Ejercicio 2 completado!',
      message: 'Todas las palabras están en el lugar correcto.',
      icon: 'fas fa-check-circle text-green-500',
      primaryText: 'Continuar'
    });
  } else {
    if(feedback) {
      feedback.classList.remove('hidden');
      feedback.querySelector('.feedback-content').classList.remove('bg-green-50', 'border-green-200');
      feedback.querySelector('.feedback-content').classList.add('bg-red-50', 'border-red-200');
      feedback.querySelector('h4').textContent = '¡Ups! Hay errores';
      feedback.querySelector('p').textContent = 'Algunas palabras no están en la posición correcta.';
      feedback.querySelector('i').className = 'fas fa-times-circle text-red-500 text-xl mr-3';
    }
  }
}

// Verificación Ejercicio 3
function checkEjercicio3() {
  const userText = document.getElementById('dictation-text').value.toLowerCase();
  const correctWords = ['taxi'];
  let foundWords = [];
  
  correctWords.forEach(word => {
    if(userText.includes(word.toLowerCase())) {
      foundWords.push(word);
    }
  });

  const feedback = document.getElementById('dictation-feedback');
  const feedbackWords = document.getElementById('dictation-words');
  
  if(feedback && feedbackWords) {
    feedback.classList.remove('hidden');
    feedbackWords.textContent = correctWords.join(', ');
  }

  if(foundWords.length === correctWords.length) {
    updateProgress(100);
    localStorage.setItem('progreso-x', 100);
    
    showModal({ 
      title: '¡Dictado correcto!',
      message: 'Has escrito todas las palabras correctamente.',
      icon: 'fas fa-check-circle text-green-500',
      primaryText: 'Terminar lección',
      onPrimary: () => {
        const btnCompletar = document.getElementById('btn-completar');
        if(btnCompletar) {
          btnCompletar.innerHTML = '<i class="fas fa-check-circle mr-2"></i> Lección completada';
          btnCompletar.classList.add('bg-green-100', 'text-green-800', 'hover:bg-green-100');
          btnCompletar.disabled = true;
        }
      }
    });
  } else {
    const missingWords = correctWords.filter(w => !foundWords.includes(w));
    
    showModal({ 
      title: 'Errores en dictado',
      message: `Faltan algunas palabras: ${missingWords.join(', ')}`,
      icon: 'fas fa-exclamation-circle text-yellow-500',
      primaryText: 'Revisar'
    });
  }
}

// Modal
function showModal({ title, message, icon, primaryText, secondaryText, onPrimary }) {
  const modal = document.getElementById('universal-modal');
  const modalTitle = document.getElementById('modal-title');
  const modalMessage = document.getElementById('modal-message');
  const modalIcon = document.getElementById('modal-icon');
  const primaryBtn = document.getElementById('modal-primary-btn');
  const secondaryBtn = document.getElementById('modal-secondary-btn');

  modalTitle.textContent = title;
  modalMessage.textContent = message;
  modalIcon.className = icon + ' text-4xl mb-4';

  primaryBtn.innerHTML = `<i class="fas fa-check mr-2"></i> ${primaryText}`;
  primaryBtn.onclick = function() { 
    if(onPrimary) onPrimary(); 
    modal.classList.add('hidden'); 
  };

  if(secondaryText) {
    secondaryBtn.innerHTML = `<i class="fas fa-times mr-2"></i> ${secondaryText}`;
    secondaryBtn.classList.remove('hidden');
    secondaryBtn.onclick = () => modal.classList.add('hidden');
  } else {
    secondaryBtn.classList.add('hidden');
  }

  modal.classList.remove('hidden');
}
</script>


</body>
</html>
